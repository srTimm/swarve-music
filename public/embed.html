<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Swarve - Embed Builder</title>
  <link rel="icon" href="Swarve.png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <meta name="title" content="Create Beautiful Discord Embeds with Live Preview | Swarve">
<meta name="description" content="Easily design stunning Discord embeds with a live preview. Customize titles, descriptions, colors, and more without coding.">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://swarve.xyz/embed">
<meta property="og:title" content="Create Beautiful Discord Embeds with Live Preview | Swarve">
<meta property="og:description" content="Easily design stunning Discord embeds with a live preview. Customize titles, descriptions, colors, and more without coding.">


<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:url" content="https://swarve.xyz/embed">
<meta name="twitter:title" content="Create Beautiful Discord Embeds with Live Preview | Swarve">
<meta name="twitter:description" content="Easily design stunning Discord embeds with a live preview. Customize titles, descriptions, colors, and more without coding.">


<!-- Additional SEO / Accessibility -->
<meta name="keywords" content="Discord, Embeds, Embed Generator, Live Preview, Discord Bot, Custom Embeds, Discord Design">
<meta name="author" content="Swarve">
<meta name="robots" content="index, follow">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: url('https://cdn.glitch.global/56a9b933-fe47-40e7-9c50-9d255f3f9e2b/Untitled.webp?v=1750274402042') no-repeat center center fixed;
      background-size: cover;
      color: #fff;
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1600px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      margin-bottom: 30px;
      padding: 20px;
      background: rgba(30,30,30,0.6);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 16px;
    }

    .header h1 {
      font-size: 2rem;
      font-weight: 800;
      margin-bottom: 0.5rem;
    }

    .header p {
      color: #aaa;
      font-size: 0.95rem;
    }

    .discord-message {
      background: #36393f;
      border-radius: 8px;
      padding: 15px;
      font-family: 'gg sans', 'Noto Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;
      min-height: 100px;
    }

    .main-content {
      display: grid;
      grid-template-columns: 0.85fr 1.15fr;
      gap: 20px;
      margin-bottom: 20px;
      align-items: start;
      width: 100%;
      max-width: 100%;
    }

    .panel {
      background: rgba(30,30,30,0.6);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 16px;
      padding: 25px;
      width: 100%;
      max-width: 100%;
      overflow: hidden;
    }

    .left-panel {
      max-height: calc(100vh - 250px);
      overflow-y: auto;
      min-width: 0;
    }

    .right-column {
      display: flex;
      flex-direction: column;
      gap: 20px;
      width: 100%;
      max-width: 100%;
      min-width: 0;
    }

    .panel h2 {
      font-size: 1.2rem;
      margin-bottom: 18px;
      font-weight: 700;
    }

    .accordion-section {
      margin-bottom: 12px;
      background: rgba(20,20,20,0.5);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 12px;
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .accordion-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 14px 18px;
      cursor: pointer;
      user-select: none;
      transition: all 0.3s ease;
    }

    .accordion-header:hover {
      background: rgba(255,255,255,0.05);
    }

    .accordion-title {
      font-weight: 600;
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .accordion-icon {
      font-size: 0.8rem;
      transition: transform 0.3s ease;
      color: #5865F2;
    }

    .accordion-section.active .accordion-icon {
      transform: rotate(180deg);
    }

    .accordion-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }

    .accordion-section.active .accordion-content {
      max-height: 2000px;
    }

    .accordion-body {
      padding: 0 18px 18px 18px;
    }

    .input-group {
      margin-bottom: 14px;
    }

    .input-group label {
      display: block;
      margin-bottom: 6px;
      font-weight: 600;
      font-size: 0.85rem;
      color: #ddd;
    }

    .input-group input,
    .input-group textarea {
      width: 100%;
      background: rgba(20,20,20,0.7);
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: 8px;
      padding: 9px 11px;
      color: #fff;
      font-family: 'Inter', sans-serif;
      font-size: 0.85rem;
      transition: all 0.3s ease;
    }

    .input-group input:focus,
    .input-group textarea:focus {
      outline: none;
      border-color: #5865F2;
      box-shadow: 0 0 0 2px rgba(88,101,242,0.2);
    }

    .input-group textarea {
      resize: vertical;
      min-height: 70px;
    }

    .color-input-wrapper {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .color-input-wrapper input[type="color"] {
      width: 50px;
      height: 40px;
      border: none;
      cursor: pointer;
    }

    .color-input-wrapper input[type="text"] {
      flex: 1;
    }

    .fields-container {
      margin-top: 10px;
    }

    .field-item {
      background: rgba(10,10,10,0.5);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 12px;
      position: relative;
    }

    .field-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .field-title {
      font-weight: 600;
      font-size: 0.85rem;
    }

    .remove-btn {
      background: #EF4444;
      border: none;
      color: #fff;
      padding: 4px 10px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.75rem;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .remove-btn:hover {
      background: #DC2626;
    }

    .add-btn {
      width: 100%;
      background: linear-gradient(135deg, #5865F2, #4752C4);
      border: 1px solid rgba(88, 101, 242, 0.3);
      color: #fff;
      padding: 9px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.85rem;
      transition: all 0.3s ease;
      margin-top: 8px;
    }

    .add-btn:hover {
      background: linear-gradient(135deg, #4752C4, #3C4398);
      transform: translateY(-1px);
    }

    .checkbox-group {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 10px;
    }

    .checkbox-group input[type="checkbox"] {
      width: 18px;
      height: 18px;
      cursor: pointer;
    }

    .preview-container {
      min-height: auto;
    }

    .discord-message {
      background: #36393f;
      border-radius: 8px;
      padding: 15px;
      font-family: 'gg sans', 'Noto Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    }

    .message-content {
      color: #dcddde;
      margin-bottom: 10px;
      word-wrap: break-word;
      overflow-wrap: break-word;
      font-size: 0.95rem;
      line-height: 1.4;
      max-width: 100%;
    }

    .embed {
      background: #2f3136;
      border-left: 4px solid #5865F2;
      border-radius: 4px;
      padding: 12px 16px 16px 12px;
      max-width: 520px;
      overflow: hidden;
    }

    .embed-author {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
    }

    .embed-author img {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      margin-right: 8px;
    }

    .embed-author-name {
      font-weight: 600;
      font-size: 0.875rem;
      color: #fff;
    }

    .embed-title {
      font-weight: 600;
      font-size: 1rem;
      color: #00b0f4;
      margin-bottom: 8px;
      line-height: 1.3;
      word-wrap: break-word;
      overflow-wrap: break-word;
      max-width: 100%;
    }

    .embed-description {
      font-size: 0.875rem;
      color: #dcddde;
      margin-bottom: 12px;
      line-height: 1.4;
      word-wrap: break-word;
      overflow-wrap: break-word;
      max-width: 100%;
    }

    .embed-fields {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      margin-bottom: 12px;
    }

    .embed-field {
      min-width: 0;
    }

    .embed-field.full {
      grid-column: 1 / -1;
    }

    .embed-field-name {
      font-weight: 600;
      font-size: 0.875rem;
      color: #fff;
      margin-bottom: 4px;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }

    .embed-field-value {
      font-size: 0.875rem;
      color: #dcddde;
      line-height: 1.4;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }

    .embed-image {
      margin-top: 12px;
      border-radius: 4px;
      max-width: 100%;
      display: block;
      object-fit: contain;
    }

    .embed-thumbnail {
      float: right;
      margin-left: 16px;
      margin-top: 8px;
      max-width: 80px;
      max-height: 80px;
      border-radius: 4px;
      object-fit: cover;
    }

    .embed-image-error,
    .embed-thumbnail-error {
      background: rgba(255, 0, 0, 0.1);
      border: 1px solid rgba(255, 0, 0, 0.3);
      padding: 8px;
      border-radius: 4px;
      color: #ff6b6b;
      font-size: 0.8rem;
      margin-top: 8px;
    }

    .embed-footer {
      display: flex;
      align-items: center;
      margin-top: 12px;
      font-size: 0.75rem;
      color: #b9bbbe;
    }

    .embed-footer img {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      margin-right: 8px;
    }

    .embed-timestamp {
      margin-left: 4px;
    }

    .json-section {
      background: rgba(30,30,30,0.6);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 16px;
      padding: 25px;
      height: 250px;
      display: flex;
      flex-direction: column;
      width: 100%;
      max-width: 100%;
      overflow: hidden;
    }

    .json-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      flex-shrink: 0;
    }

    .json-header h2 {
      font-size: 1.2rem;
      font-weight: 700;
    }

    .copy-btn {
      background: linear-gradient(135deg, #57F287, #43B581);
      border: 1px solid rgba(87, 242, 135, 0.3);
      color: #fff;
      padding: 8px 16px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.9rem;
      transition: all 0.3s ease;
    }

    .copy-btn:hover {
      background: linear-gradient(135deg, #43B581, #36A86B);
      transform: translateY(-1px);
    }

    .json-output {
      background: #1e1e1e;
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: 8px;
      padding: 15px;
      color: #d4d4d4;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 0.85rem;
      overflow-x: scroll;
      overflow-y: scroll;
      white-space: nowrap;
      flex: 1;
      min-height: 0;
      width: 100%;
      max-width: 100%;
    }

    .left-panel::-webkit-scrollbar,
    .json-output::-webkit-scrollbar {
      width: 8px;
    }

    .left-panel::-webkit-scrollbar-track,
    .json-output::-webkit-scrollbar-track {
      background: rgba(0,0,0,0.2);
      border-radius: 4px;
    }

    .left-panel::-webkit-scrollbar-thumb,
    .json-output::-webkit-scrollbar-thumb {
      background: rgba(255,255,255,0.2);
      border-radius: 4px;
    }

    .left-panel::-webkit-scrollbar-thumb:hover,
    .json-output::-webkit-scrollbar-thumb:hover {
      background: rgba(255,255,255,0.3);
    }

    @media (max-width: 1200px) {
      .main-content {
        grid-template-columns: 1fr;
      }

      .left-panel {
        max-height: none;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Swarve - Embed Builder</h1>
      <p>Create beautiful Discord embeds with live preview</p>
    </div>

    <div class="main-content">
      <div class="panel left-panel">
        <h2>Embed Configuration</h2>
        
        <!-- Content Section -->
        <div class="accordion-section" id="content-section">
          <div class="accordion-header" onclick="toggleAccordion('content-section')">
            <div class="accordion-title">
              <span>üí¨</span>
              <span>Message Content</span>
            </div>
            <span class="accordion-icon">‚ñº</span>
          </div>
          <div class="accordion-content">
            <div class="accordion-body">
              <div class="input-group">
                <label>Content</label>
                <textarea id="content" placeholder="Enter message content (outside embed)"></textarea>
              </div>
            </div>
          </div>
        </div>

        <!-- Author Section -->
        <div class="accordion-section" id="author-section">
          <div class="accordion-header" onclick="toggleAccordion('author-section')">
            <div class="accordion-title">
              <span>üë§</span>
              <span>Author</span>
            </div>
            <span class="accordion-icon">‚ñº</span>
          </div>
          <div class="accordion-content">
            <div class="accordion-body">
              <div class="input-group">
                <label>Author Name</label>
                <input type="text" id="authorName" placeholder="Author name">
              </div>
              <div class="input-group">
                <label>Author URL</label>
                <input type="url" id="authorUrl" placeholder="https://discord.com">
              </div>
              <div class="input-group">
                <label>Author Icon URL</label>
                <input type="url" id="authorIcon" placeholder="https://cdn.discordapp.com/embed/avatars/0.png">
              </div>
            </div>
          </div>
        </div>

        <!-- Body Section -->
        <div class="accordion-section active" id="body-section">
          <div class="accordion-header" onclick="toggleAccordion('body-section')">
            <div class="accordion-title">
              <span>üìù</span>
              <span>Body</span>
            </div>
            <span class="accordion-icon">‚ñº</span>
          </div>
          <div class="accordion-content">
            <div class="accordion-body">
              <div class="input-group">
                <label>Title</label>
                <input type="text" id="title" placeholder="Embed title">
              </div>
              <div class="input-group">
                <label>Title URL</label>
                <input type="url" id="titleUrl" placeholder="https://discord.com">
              </div>
              <div class="input-group">
                <label>Description</label>
                <textarea id="description" placeholder="Embed description"></textarea>
              </div>
              <div class="input-group">
                <label>Color</label>
                <div class="color-input-wrapper">
                  <input type="color" id="colorPicker" value="#5865F2">
                  <input type="text" id="colorHex" placeholder="#5865F2" value="#5865F2">
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Images Section -->
        <div class="accordion-section" id="images-section">
          <div class="accordion-header" onclick="toggleAccordion('images-section')">
            <div class="accordion-title">
              <span>üñºÔ∏è</span>
              <span>Images</span>
            </div>
            <span class="accordion-icon">‚ñº</span>
          </div>
          <div class="accordion-content">
            <div class="accordion-body">
              <div class="input-group">
                <label>Thumbnail URL</label>
                <input type="url" id="thumbnail" placeholder="https://cdn.discordapp.com/embed/avatars/0.png">
              </div>
              <div class="input-group">
                <label>Image URL</label>
                <input type="url" id="image" placeholder="https://example.com/image.png">
              </div>
            </div>
          </div>
        </div>

        <!-- Footer Section -->
        <div class="accordion-section" id="footer-section">
          <div class="accordion-header" onclick="toggleAccordion('footer-section')">
            <div class="accordion-title">
              <span>‚è∞</span>
              <span>Footer</span>
            </div>
            <span class="accordion-icon">‚ñº</span>
          </div>
          <div class="accordion-content">
            <div class="accordion-body">
              <div class="input-group">
                <label>Footer Text</label>
                <input type="text" id="footerText" placeholder="Footer text">
              </div>
              <div class="input-group">
                <label>Footer Icon URL</label>
                <input type="url" id="footerIcon" placeholder="https://cdn.discordapp.com/embed/avatars/0.png">
              </div>
              <div class="checkbox-group">
                <input type="checkbox" id="timestamp">
                <label for="timestamp">Include Timestamp</label>
              </div>
            </div>
          </div>
        </div>

        <!-- Fields Section -->
        <div class="accordion-section" id="fields-section">
          <div class="accordion-header" onclick="toggleAccordion('fields-section')">
            <div class="accordion-title">
              <span>üìã</span>
              <span>Fields</span>
            </div>
            <span class="accordion-icon">‚ñº</span>
          </div>
          <div class="accordion-content">
            <div class="accordion-body">
              <div class="fields-container" id="fieldsContainer"></div>
              <button class="add-btn" onclick="addField()">+ Add Field</button>
            </div>
          </div>
        </div>
      </div>

      <div class="right-column">
        <div class="panel preview-container">
          <h2>Live Preview</h2>
          <div class="discord-message">
            <div class="message-content" id="previewContent"></div>
            <div class="embed" id="previewEmbed">
              <div id="previewAuthor"></div>
              <div id="previewThumbnail"></div>
              <div id="previewTitle"></div>
              <div id="previewDescription"></div>
              <div id="previewFields"></div>
              <div id="previewImage"></div>
              <div id="previewFooter"></div>
            </div>
          </div>
        </div>

        <div class="json-section">
          <div class="json-header">
            <h2>JSON Output</h2>
            <button class="copy-btn" onclick="copyJSON()">Copy JSON</button>
          </div>
          <pre class="json-output" id="jsonOutput"></pre>
        </div>
      </div>
    </div>
  </div>

  <script>
    let fields = [];

    function toggleAccordion(sectionId) {
      const section = document.getElementById(sectionId);
      section.classList.toggle('active');
    }

    function hexToDecimal(hex) {
      return parseInt(hex.replace('#', ''), 16);
    }

    function decimalToHex(dec) {
      return '#' + dec.toString(16).padStart(6, '0');
    }

    function parseDiscordEmoji(text) {
      if (!text) return text;
      
      // Parse custom emojis <:name:id> or <a:name:id>
      return text.replace(/<(a?):(\w+):(\d+)>/g, (match, animated, name, id) => {
        const ext = animated ? 'gif' : 'png';
        return `<img src="https://cdn.discordapp.com/emojis/${id}.${ext}?size=20&quality=lossless" alt="${name}" style="width: 20px; height: 20px; vertical-align: middle; display: inline-block;">`;
      });
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    function formatDiscordText(text) {
      if (!text) return '';
      
      // First parse emojis
      let formatted = parseDiscordEmoji(text);
      
      // Then handle other markdown (simplified version)
      // Bold
      formatted = formatted.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
      // Italic
      formatted = formatted.replace(/\*(.+?)\*/g, '<em>$1</em>');
      formatted = formatted.replace(/_(.+?)_/g, '<em>$1</em>');
      // Underline
      formatted = formatted.replace(/__(.+?)__/g, '<u>$1</u>');
      // Strikethrough
      formatted = formatted.replace(/~~(.+?)~~/g, '<s>$1</s>');
      // Code
      formatted = formatted.replace(/`(.+?)`/g, '<code style="background: rgba(0,0,0,0.3); padding: 2px 4px; border-radius: 3px; font-family: monospace;">$1</code>');
      
      return formatted;
    }

    document.getElementById('colorPicker').addEventListener('input', (e) => {
      document.getElementById('colorHex').value = e.target.value;
      updatePreview();
    });

    document.getElementById('colorHex').addEventListener('input', (e) => {
      const hex = e.target.value;
      if (/^#[0-9A-F]{6}$/i.test(hex)) {
        document.getElementById('colorPicker').value = hex;
        updatePreview();
      }
    });

    document.querySelectorAll('input, textarea').forEach(el => {
      el.addEventListener('input', updatePreview);
    });

    document.getElementById('timestamp').addEventListener('change', updatePreview);

    function addField() {
      const field = {
        id: Date.now(),
        name: '',
        value: '',
        inline: false
      };
      fields.push(field);
      renderFields();
      updatePreview();
    }

    function removeField(id) {
      fields = fields.filter(f => f.id !== id);
      renderFields();
      updatePreview();
    }

    function updateField(id, prop, value) {
      const field = fields.find(f => f.id === id);
      if (field) {
        field[prop] = value;
        updatePreview();
      }
    }

    function renderFields() {
      const container = document.getElementById('fieldsContainer');
      container.innerHTML = fields.map((field, index) => `
        <div class="field-item">
          <div class="field-header">
            <span class="field-title">Field ${index + 1}</span>
            <button class="remove-btn" onclick="removeField(${field.id})">Remove</button>
          </div>
          <div class="input-group">
            <label>Name</label>
            <input type="text" value="${escapeHtml(field.name)}" 
              oninput="updateField(${field.id}, 'name', this.value)" 
              placeholder="Field name">
          </div>
          <div class="input-group">
            <label>Value</label>
            <textarea oninput="updateField(${field.id}, 'value', this.value)" 
              placeholder="Field value">${escapeHtml(field.value)}</textarea>
          </div>
          <div class="checkbox-group">
            <input type="checkbox" id="inline${field.id}" 
              ${field.inline ? 'checked' : ''}
              onchange="updateField(${field.id}, 'inline', this.checked)">
            <label for="inline${field.id}">Inline</label>
          </div>
        </div>
      `).join('');
    }

    function updatePreview() {
      const content = document.getElementById('content').value;
      const authorName = document.getElementById('authorName').value;
      const authorUrl = document.getElementById('authorUrl').value;
      const authorIcon = document.getElementById('authorIcon').value;
      const title = document.getElementById('title').value;
      const titleUrl = document.getElementById('titleUrl').value;
      const description = document.getElementById('description').value;
      const color = document.getElementById('colorHex').value;
      const thumbnail = document.getElementById('thumbnail').value;
      const image = document.getElementById('image').value;
      const footerText = document.getElementById('footerText').value;
      const footerIcon = document.getElementById('footerIcon').value;
      const includeTimestamp = document.getElementById('timestamp').checked;

      // Format content with emoji support
      const formattedContent = formatDiscordText(content);
      const contentEl = document.getElementById('previewContent');
      contentEl.innerHTML = formattedContent || '';
      contentEl.style.display = content ? 'block' : 'none';

      const embed = document.getElementById('previewEmbed');
      embed.style.borderLeftColor = color || '#5865F2';

      // Check if embed has any content
      const hasEmbedContent = authorName || title || description || thumbnail || image || 
                              footerText || includeTimestamp || fields.length > 0;
      
      if (!hasEmbedContent) {
        embed.style.display = 'none';
      } else {
        embed.style.display = 'block';
      }

      // Author
      const authorEl = document.getElementById('previewAuthor');
      if (authorName) {
        authorEl.innerHTML = `
          <div class="embed-author">
            ${authorIcon ? `<img src="${authorIcon}" alt="Author" onerror="this.style.display='none'">` : ''}
            <a href="${authorUrl || '#'}" class="embed-author-name">${formatDiscordText(authorName)}</a>
          </div>
        `;
      } else {
        authorEl.innerHTML = '';
      }

      // Thumbnail
      const thumbnailEl = document.getElementById('previewThumbnail');
      if (thumbnail) {
        thumbnailEl.innerHTML = `<img src="${thumbnail}" class="embed-thumbnail" alt="Thumbnail" onerror="this.src=''; this.alt='Failed to load thumbnail'; this.classList.add('embed-thumbnail-error'); this.style.width='auto'; this.style.height='auto'; this.style.padding='8px';">`;
      } else {
        thumbnailEl.innerHTML = '';
      }

      // Title
      const titleEl = document.getElementById('previewTitle');
      if (title) {
        const formattedTitle = formatDiscordText(title);
        titleEl.innerHTML = titleUrl ? 
          `<a href="${titleUrl}" class="embed-title">${formattedTitle}</a>` :
          `<div class="embed-title">${formattedTitle}</div>`;
      } else {
        titleEl.innerHTML = '';
      }

      // Description
      const descEl = document.getElementById('previewDescription');
      if (description) {
        descEl.innerHTML = `<div class="embed-description">${formatDiscordText(description)}</div>`;
      } else {
        descEl.innerHTML = '';
      }

      // Fields
      const fieldsEl = document.getElementById('previewFields');
      if (fields.length > 0) {
        fieldsEl.innerHTML = `
          <div class="embed-fields">
            ${fields.map(field => `
              <div class="embed-field ${field.inline ? '' : 'full'}">
                <div class="embed-field-name">${formatDiscordText(field.name || 'Field Name')}</div>
                <div class="embed-field-value">${formatDiscordText(field.value || 'Field Value')}</div>
              </div>
            `).join('')}
          </div>
        `;
      } else {
        fieldsEl.innerHTML = '';
      }

      // Image
      const imageEl = document.getElementById('previewImage');
      if (image) {
        imageEl.innerHTML = `<img src="${image}" class="embed-image" alt="Embed Image" onerror="this.outerHTML='<div class=\\'embed-image-error\\'>Failed to load image</div>'">`;
      } else {
        imageEl.innerHTML = '';
      }

      // Footer
      const footerEl = document.getElementById('previewFooter');
      if (footerText || includeTimestamp) {
        footerEl.innerHTML = `
          <div class="embed-footer">
            ${footerIcon ? `<img src="${footerIcon}" alt="Footer" onerror="this.style.display='none'">` : ''}
            <span>${formatDiscordText(footerText || '')}</span>
            ${includeTimestamp ? `<span class="embed-timestamp">‚Ä¢ ${new Date().toLocaleString()}</span>` : ''}
          </div>
        `;
      } else {
        footerEl.innerHTML = '';
      }

      updateJSON();
    }

    function updateJSON() {
      const content = document.getElementById('content').value;
      const authorName = document.getElementById('authorName').value;
      const authorUrl = document.getElementById('authorUrl').value;
      const authorIcon = document.getElementById('authorIcon').value;
      const title = document.getElementById('title').value;
      const titleUrl = document.getElementById('titleUrl').value;
      const description = document.getElementById('description').value;
      const color = document.getElementById('colorHex').value;
      const thumbnail = document.getElementById('thumbnail').value;
      const image = document.getElementById('image').value;
      const footerText = document.getElementById('footerText').value;
      const footerIcon = document.getElementById('footerIcon').value;
      const includeTimestamp = document.getElementById('timestamp').checked;

      // Check if there's any content at all
      const hasContent = content || authorName || title || description || thumbnail || image || 
                        footerText || includeTimestamp || fields.length > 0;

      if (!hasContent) {
        document.getElementById('jsonOutput').textContent = '{}';
        return;
      }

      const json = {};
      
      if (content) json.content = content;

      const embed = {};
      if (title) embed.title = title;
      if (description) embed.description = description;
      if (color && color !== '#5865F2') embed.color = hexToDecimal(color);
      if (titleUrl) embed.url = titleUrl;
      if (includeTimestamp) embed.timestamp = new Date().toISOString();

      if (authorName) {
        embed.author = { name: authorName };
        if (authorUrl) embed.author.url = authorUrl;
        if (authorIcon) embed.author.icon_url = authorIcon;
      }

      if (thumbnail) {
        embed.thumbnail = { url: thumbnail };
      }

      if (image) {
        embed.image = { url: image };
      }

      if (footerText || footerIcon) {
        embed.footer = {};
        if (footerText) embed.footer.text = footerText;
        if (footerIcon) embed.footer.icon_url = footerIcon;
      }

      if (fields.length > 0) {
        embed.fields = fields.map(f => ({
          name: f.name || 'Field Name',
          value: f.value || 'Field Value',
          inline: f.inline
        }));
      }

      if (Object.keys(embed).length > 0) {
        json.embed = embed;
      }

      // Format as compact JSON (no line breaks except for readability)
      const jsonString = JSON.stringify(json);
      document.getElementById('jsonOutput').textContent = jsonString;
    }

    function copyJSON() {
      const json = document.getElementById('jsonOutput').textContent;
      navigator.clipboard.writeText(json).then(() => {
        const btn = document.querySelector('.copy-btn');
        const originalText = btn.textContent;
        btn.textContent = 'Copied!';
        setTimeout(() => {
          btn.textContent = originalText;
        }, 2000);
      });
    }

    // Initialize with empty embed
    updatePreview();
  </script>
</body>
</html>